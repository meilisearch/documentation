<CodeGroup>

```javascript JS
import { generateTenantToken } from 'meilisearch/token'

const searchRules = {
  patient_medical_records: {
    filter: 'user_id = 1'
  }
}
const apiKey = 'B5KdX2MY2jV6EXfUs6scSfmC...'
const apiKeyUid = '85c3c2f9-bdd6-41f1-abd8-11fcf80e0f76'
const expiresAt = new Date('2025-12-20') // optional

const token = await generateTenantToken({ apiKey, apiKeyUid, searchRules, expiresAt })
```

```python Python
uid = '85c3c2f9-bdd6-41f1-abd8-11fcf80e0f76';
api_key = 'B5KdX2MY2jV6EXfUs6scSfmC...'
expires_at = datetime(2025, 12, 20)
search_rules = {
  'patient_medical_records': {
    'filter': 'user_id = 1'
  }
}
token = client.generate_tenant_token(api_key_uid=uid, search_rules=search_rules, api_key=api_key, expires_at=expires_at)
```

```php PHP
$apiKeyUid = '85c3c2f9-bdd6-41f1-abd8-11fcf80e0f76';
$searchRules = (object) [
  'patient_medical_records' => (object) [
    'filter' => 'user_id = 1',
  ]
];
$options = [
    'apiKey' => 'B5KdX2MY2jV6EXfUs6scSfmC...',
    'expiresAt' => new DateTime('2025-12-20'),
];

$token = $client->generateTenantToken($apiKeyUid, $searchRules, $options);
```

```java Java
Map<String, Object> filters = new HashMap<String, Object>();
filters.put("filter", "user_id = 1");
Map<String, Object> searchRules = new HashMap<String, Object>();
searchRules.put("patient_medical_records", filters);

Date expiresAt = new SimpleDateFormat("yyyy-MM-dd").parse("2025-12-20");
TimeZone.setDefault(TimeZone.getTimeZone("UTC"));
TenantTokenOptions options = new TenantTokenOptions();
options.setApiKey("B5KdX2MY2jV6EXfUs6scSfmC...");
options.setExpiresAt(expiresAt);

String token = client.generateTenantToken("85c3c2f9-bdd6-41f1-abd8-11fcf80e0f76", searchRules, options);
```

```ruby Ruby
uid = '85c3c2f9-bdd6-41f1-abd8-11fcf80e0f76'
api_key = 'B5KdX2MY2jV6EXfUs6scSfmC...'
expires_at = Time.new(2025, 12, 20).utc
search_rules = {
  'patient_medical_records' => {
    'filter' => 'user_id = 1'
  }
}

token = client.generate_tenant_token(uid, search_rules, api_key: api_key, expires_at: expires_at)
```

```go Go
searchRules := map[string]interface{}{
  "patient_medical_records": map[string]string{
    "filter": "user_id = 1",
  },
}
options := &meilisearch.TenantTokenOptions{
  APIKey: "B5KdX2MY2jV6EXfUs6scSfmC...",
  ExpiresAt: time.Date(2025, time.December, 20, 0, 0, 0, 0, time.UTC),
}

token, err := client.GenerateTenantToken(searchRules, options);
```

```csharp C#
var apiKey = "B5KdX2MY2jV6EXfUs6scSfmC...";
var expiresAt = new DateTime(2025, 12, 20);
var searchRules = new TenantTokenRules(new Dictionary<string, object> {
  { "patient_medical_records", new Dictionary<string, object> { { "filter", "user_id = 1" } } }
});

token = client.GenerateTenantToken(
  searchRules,
  apiKey: apiKey // optional,
  expiresAt: expiresAt // optional
);
```

```rust Rust
let api_key = "B5KdX2MY2jV6EXfUs6scSfmC...";
let api_key_uid = "6062abda-a5aa-4414-ac91-ecd7944c0f8d";
let expires_at = time::macros::datetime!(2025 - 12 - 20 00:00:00 UTC);
let search_rules = json!({ "patient_medical_records": { "filter": "user_id = 1" } });

let token = client
  .generate_tenant_token(api_key_uid, search_rules, api_key, expires_at)
  .unwrap();
```
</CodeGroup>