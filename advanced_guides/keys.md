# Keys

To communicate with MeiliSearch's `RESTfull API` most of the routes require an `API key`.

The following information defines a key:
* A **[Key](/advanced_guides/keys.md#key)** generated by MeiliSearch
* A **[Description](/advanced_guides/keys.md#description)**
* An **[ACL:](/advanced_guides/keys.md#acl)** list of permissions
* An **[Indexes list](/advanced_guides/keys.md#indexes)**  with wildcard on which the ACL's are applied
* A **[Revoked](/advanced_guides/keys.md#revoked)** updatable boolean to revoke a key <Badge text="soon" type="warn"/> 
* An **[Expires_at](/advanced_guides/keys.md#expires-at)** timestamp that indicated the expire date of the token

A key is passed to MeiliSearch using the header 
` X-Meili-Api-Key : myApiKey `

## Master key

This is the only key that is not created by the API but is **set as environement variable or as a binary flag** when [launching the MeiliSearch binary](/advanced_guides/binary).

This key gives access to every route of the API.

::: warning
When no master key is set on binary launch, no API key is needed on any route.
**Giving full access to the API**.
:::

#### Examples

-----

```bash
# with the flag
./meilidb-http --api-key myMasterKey
# with the environement variable
MEILI_API_KEY=myMasterKey ./meilidb-http 
```

This header `X-Meili-Api-Key: myMasterKey` gives access to the whole API.

-----
```bash
./meilidb-http
```

The header `X-Meili-Api-Key` is **not required** on any API requests. Creating **an important security breach**. 


## Creating a key

Depending on the environment from which you use the MeiliSearch API, you only use a certain action set. It is possible to [create an API key](/references/keys.md#create-key) that only gives access to this set of actions.

You can create as many keys as you want.


## Key

**MeiliSearch generates the key**.

The key is returned on [key creation](/references/keys.md#create-key). This key is your `API KEY`. 

In the header, the API key is set in the ` X-Meili-Api-Key` attribute.

This way : 

```bash
curl \
  --request POST 'http://localhost:8080/indexes' \
  --header ' X-Meili-Api-Key: myApiKey'
```

## Description

The description expects a summary on the `API KEY` and the ACL it contains.

It should help you track your keys.

## ACL 

`ACL` or Access-Control List is the list of permissions an `API KEY` can have.


* `IndexesRead`: read access on [indexes](/references/indexes) 
* `IndexesWrite`: write access on [indexes](/references/indexes) 
* `DocumentsRead`: read access on [documents](/references/documents) 
* `DocumentsWrite`: write access on [documents](/references/documents) 
* `SettingsRead`: read access on [settings](/references/settings) 
* `SettingsWrite`: write access on [settings](/references/settings) 
* `Admin`: full permission on [keys](/references/keys) and [stats](/references/stats)
* `All`: all of the above

**Read** gives access to all `GET` methods of the given route.

**Write** gives access to all `POST`, `PUT`, `PATCH`, `DELETE` methods of the given route.

### Example

If you use the API on **the browser side to only make search queries**, you do not need this same API key to be able to do anything else. 

```bash
curl \
  --location \
  --request POST 'http://localhost:8080/keys' \
  --header "X-Meili-API-Key: $API_KEY"
  --header 'Content-Type: application/json' \
  --data '{
      "expiresAt": 1574332928,
      "description": "search key",
      "acl": ["documentsRead"],
      "indexes" : ["movies"]
  }'
```

This will return an `API key` that you can safely use on your browser side.

## Indexes

`Indexes` attribute contains a list of indexes to which the key is applied.

Wildcards are also acceptable inputs. Wildcards work as follows
* `"name_of_index"` exact name of index
* `"*suffix"` every index with this suffix
* `"prefix*"`every index with this prefix
* `"*"` all indexes.


#### Examples
Given a set of indexes: `english_movies`, `chinese_movies`, `french_books`

The indexes list: `["*_movies"] ` will **give access** to `english_movies` and `chinese_movies` but not `french_books`.

-----

Given a set of indexes: `english_movies`, `chinese_movies`, `english_books`, `french_books`

The indexes list: `["english_*"] ` will **give access** to `english_movies` and `english_books` but not `french_books` and `chinese_movies`.

## Revoked

Coming soon.

## Expires at

This attribute takes a `timestamp` as input. This timestamp is the expire date after which the `API KEY` will lose all his accesses.
